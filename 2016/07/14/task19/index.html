<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>task19 | 韩佳宁的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="task19问答题
基础类型有哪些？复杂类型有哪些？有什么特征？基础类型有:数值 布尔值 字符串 null和undefined基础类型指的是直接保存在栈内存中的简单数据；
复杂类型有 数组 函数 JSON 正则(基本都是对象)复杂类型 本身的存储 是在内存中划分个特定区域变量本身只是一个记录通向这个区域位置的地址(指针)

如下代码的输出? 为什么?
12345var obj1 = &amp;#123;a">
<meta property="og:type" content="article">
<meta property="og:title" content="task19">
<meta property="og:url" content="http://panda-hjn.github.io/2016/07/14/task19/index.html">
<meta property="og:site_name" content="韩佳宁的博客">
<meta property="og:description" content="task19问答题
基础类型有哪些？复杂类型有哪些？有什么特征？基础类型有:数值 布尔值 字符串 null和undefined基础类型指的是直接保存在栈内存中的简单数据；
复杂类型有 数组 函数 JSON 正则(基本都是对象)复杂类型 本身的存储 是在内存中划分个特定区域变量本身只是一个记录通向这个区域位置的地址(指针)

如下代码的输出? 为什么?
12345var obj1 = &amp;#123;a">
<meta property="og:updated_time" content="2016-07-15T18:46:39.445Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="task19">
<meta name="twitter:description" content="task19问答题
基础类型有哪些？复杂类型有哪些？有什么特征？基础类型有:数值 布尔值 字符串 null和undefined基础类型指的是直接保存在栈内存中的简单数据；
复杂类型有 数组 函数 JSON 正则(基本都是对象)复杂类型 本身的存储 是在内存中划分个特定区域变量本身只是一个记录通向这个区域位置的地址(指针)

如下代码的输出? 为什么?
12345var obj1 = &amp;#123;a">
  
    <link rel="alternate" href="/atom.xml" title="韩佳宁的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">韩佳宁的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://panda-hjn.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-task19" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/14/task19/" class="article-date">
  <time datetime="2016-07-14T10:05:27.000Z" itemprop="datePublished">2016-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      task19
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="task19"><a href="#task19" class="headerlink" title="task19"></a>task19</h1><h2 id="问答题"><a href="#问答题" class="headerlink" title="问答题"></a>问答题</h2><ul>
<li><p>基础类型有哪些？复杂类型有哪些？有什么特征？<br>基础类型有:数值 布尔值 字符串 null和undefined<br>基础类型指的是直接保存在栈内存中的简单数据；</p>
<p>复杂类型有 数组 函数 JSON 正则(基本都是对象)<br>复杂类型 本身的存储 是在内存中划分个特定区域<br>变量本身只是一个记录通向这个区域位置的地址(指针)</p>
</li>
<li><p>如下代码的输出? 为什么?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;a:<span class="number">1</span>, b:<span class="number">2</span>&#125;;</div><div class="line"><span class="keyword">var</span> obj2 = &#123;a:<span class="number">1</span>, b:<span class="number">2</span>&#125;;</div><div class="line"><span class="built_in">console</span>.log(obj1 == obj2);<span class="comment">//false  obj1 obj2 指向的是不同的内存地址,所以false</span></div><div class="line"><span class="built_in">console</span>.log(obj1 = obj2);<span class="comment">//Object &#123;a: 1, b: 2&#125; 将obj2赋给obj1 返回obj1的值</span></div><div class="line"><span class="built_in">console</span>.log(obj1 == obj2);<span class="comment">//true 经过上一步操作 obj1 obj2 现在指向同一个地址 所以true</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><ul>
<li>写一个函数getIntv，获取从当前时间到指定日期的间隔时间</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = getIntv(<span class="string">"2016-01-08"</span>);</div><div class="line"><span class="built_in">console</span>.log(str);  <span class="comment">// 距除夕还有 20 天 15 小时 20 分 10 秒</span></div></pre></td></tr></table></figure>
<p>答:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIntv</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> strDate = str;</div><div class="line">  <span class="keyword">var</span> NewYearEve = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2017</span>,<span class="number">0</span>,<span class="number">27</span>);</div><div class="line">  <span class="keyword">var</span> distence = NewYearEve.getTime() - strDate.getTime()</div><div class="line">  <span class="keyword">if</span> (distence&lt;<span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'这个日期在2017年除夕之后'</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> days = <span class="built_in">Math</span>.floor(distence/<span class="number">1000</span>/(<span class="number">24</span>*<span class="number">3600</span>));</div><div class="line">  <span class="keyword">var</span> hours = <span class="built_in">Math</span>.floor((distence/<span class="number">1000</span>-days*<span class="number">24</span>*<span class="number">3600</span>)/<span class="number">3600</span>);</div><div class="line">  <span class="keyword">var</span> minutes = <span class="built_in">Math</span>.floor(((distence/<span class="number">1000</span>-days*<span class="number">24</span>*<span class="number">3600</span>)-hours*<span class="number">3600</span>)/<span class="number">60</span>);</div><div class="line">  <span class="keyword">var</span> seconds = <span class="built_in">Math</span>.ceil(distence/<span class="number">1000</span>-days*<span class="number">24</span>*<span class="number">3600</span>-hours*<span class="number">3600</span>-minutes*<span class="number">60</span>);</div><div class="line">  <span class="keyword">return</span>  <span class="string">'距离2017年春节还有'</span> + days+ <span class="string">'天'</span>+hours +<span class="string">'时'</span>+ minutes+<span class="string">'分'</span>+seconds+<span class="string">'秒'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">Date</span>();<span class="comment">//Thu Jul 14 2016 04:20:23 GMT+0800 (中国标准时间)</span></div><div class="line"><span class="keyword">var</span> str2 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2017</span>,<span class="number">0</span>,<span class="number">26</span>,<span class="number">23</span>);</div><div class="line"><span class="keyword">var</span> str3 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2017</span>,<span class="number">9</span>,<span class="number">5</span>);</div><div class="line"><span class="built_in">console</span>.log(getIntv(str1));<span class="comment">//"距离2017年春节还有196天19时45分14秒"</span></div><div class="line"><span class="built_in">console</span>.log(getIntv(str2));<span class="comment">//"距离2017年春节还有0天1时0分0秒"</span></div><div class="line"><span class="built_in">console</span>.log(getIntv(str3));<span class="comment">//"这个日期在2017年除夕之后"</span></div></pre></td></tr></table></figure>
<ul>
<li>把数字日期改成中文日期</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = getChsDate(<span class="string">'2015-01-08'</span>);</div><div class="line"><span class="built_in">console</span>.log(str);  <span class="comment">// 二零一五年一月八日</span></div></pre></td></tr></table></figure>
<p>答:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getChsDate</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> strDate = <span class="keyword">new</span> <span class="built_in">Date</span>(str);</div><div class="line">  <span class="keyword">var</span> y = strDate.getFullYear();</div><div class="line">  <span class="keyword">var</span> m = strDate.getMonth()+<span class="number">1</span>;</div><div class="line">  <span class="keyword">var</span> d = strDate.getDate();</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">toChinese</span>(<span class="params">num</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> newStr = <span class="string">''</span>;<span class="comment">//建立个空字符串,方便后面类型转换</span></div><div class="line">      <span class="keyword">var</span> numArr = num.toString().split(<span class="string">''</span>);</div><div class="line">      <span class="keyword">var</span> chiNumArr = [<span class="string">'零'</span>,<span class="string">'一'</span>,<span class="string">'二'</span>,<span class="string">'三'</span>,<span class="string">'四'</span>,<span class="string">'五'</span>,<span class="string">'六'</span>,<span class="string">'七'</span>,<span class="string">'八'</span>,<span class="string">'九'</span>,<span class="string">'十'</span>];</div><div class="line">      <span class="keyword">while</span> (numArr.length==<span class="number">4</span>||numArr.length==<span class="number">1</span>) &#123;</div><div class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; numArr.length; i++) &#123;</div><div class="line">            newStr= newStr+ chiNumArr[numArr[i]];</div><div class="line">            &#125;</div><div class="line">          <span class="keyword">return</span> newStr;</div><div class="line">        &#125;</div><div class="line">      <span class="keyword">while</span> (numArr.length==<span class="number">2</span>) &#123;</div><div class="line">        newStr = chiNumArr[numArr[<span class="number">0</span>]] +<span class="string">'十'</span> +chiNumArr[numArr[<span class="number">1</span>]];</div><div class="line">        <span class="keyword">return</span> newStr;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">        <span class="keyword">return</span> toChinese(y)+<span class="string">'年'</span>+toChinese(m)+<span class="string">'月'</span>+toChinese(d)+<span class="string">'日'</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> str1 = getChsDate(<span class="string">'3015-1-2'</span>);</div><div class="line">    <span class="keyword">var</span> str2 = getChsDate(<span class="string">'2015-8-23'</span>);</div><div class="line">    <span class="built_in">console</span>.log(str1);<span class="comment">//"三零一五年一月二日"</span></div><div class="line">    <span class="built_in">console</span>.log(str2);<span class="comment">//"二零一五年八月二十三日"</span></div></pre></td></tr></table></figure>
<ul>
<li>写一个函数获取n天前的日期</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> lastWeek =  getLastNDays(<span class="number">7</span>); <span class="comment">// ‘2016-01-08’</span></div><div class="line"><span class="keyword">var</span> lastMonth = getLastNDays(<span class="number">30</span>); <span class="comment">//'2015-12-15'</span></div></pre></td></tr></table></figure>
<p>答:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLastNDays</span>(<span class="params">days</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() - days*<span class="number">1000</span>*<span class="number">24</span>*<span class="number">3600</span>);</div><div class="line">  <span class="keyword">var</span> dateStr = <span class="keyword">new</span> <span class="built_in">Date</span>(time);</div><div class="line">  <span class="keyword">return</span> dateStr = dateStr.getFullYear()+ <span class="string">'-'</span>+(dateStr.getMonth()+<span class="number">1</span>)+ <span class="string">'-'</span>+dateStr.getDate()</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> today = getLastNDays(<span class="number">7</span>);      <span class="comment">//"2016-7-14"</span></div><div class="line"><span class="keyword">var</span> lastWeek =  getLastNDays(<span class="number">7</span>);  <span class="comment">//"2016-7-7"</span></div><div class="line"><span class="keyword">var</span> lastMonth = getLastNDays(<span class="number">30</span>); <span class="comment">//"2016-6-14"</span></div></pre></td></tr></table></figure>
<ul>
<li>完善如下代码，用于获取执行时间如：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Runtime = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">//code here ...</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        start: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              <span class="comment">//code here ...， 当前时间</span></div><div class="line">        &#125;,</div><div class="line">        end: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">             <span class="comment">//code here ...  结束时间</span></div><div class="line">        &#125;,</div><div class="line">        get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">             <span class="comment">//code here ...  获取执行时间</span></div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;());</div><div class="line">Runtime.start();</div><div class="line"><span class="comment">//todo somethint</span></div><div class="line">Runtime.end();</div><div class="line"><span class="built_in">console</span>.log(  Runtime.get() );</div></pre></td></tr></table></figure>
<p>答:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Runtime = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">     <span class="keyword">var</span> startDate,endDate</div><div class="line">     <span class="keyword">return</span> &#123;</div><div class="line">        start: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            startDate=<span class="built_in">Date</span>.now()  <span class="comment">//获取当前时间</span></div><div class="line">            <span class="keyword">return</span> startDate</div><div class="line">        &#125;,</div><div class="line">        end: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            endDate=<span class="built_in">Date</span>.now()   <span class="comment">//获取结束时时间</span></div><div class="line">            <span class="keyword">return</span> endDate</div><div class="line">        &#125;,</div><div class="line">        get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;         <span class="comment">//经过的时间为二者相减</span></div><div class="line">              <span class="keyword">return</span> endDate-startDate;</div><div class="line">         &#125;</div><div class="line">     &#125;<span class="comment">//Runtime 是个装有立即执行函数的对象</span></div><div class="line">      <span class="comment">//通过 . 操作符 可以获取相应键值的内容</span></div><div class="line">&#125;())</div><div class="line">Runtime.start();</div><div class="line"></div><div class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5000</span>;i++)&#123;</div><div class="line">     <span class="built_in">console</span>.log(i)</div><div class="line">&#125; <span class="comment">//数数 数5000次</span></div><div class="line"></div><div class="line">Runtime.end()</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(  Runtime.get() ) <span class="comment">// 我的电脑数数 数5000次 用了 1032毫秒</span></div></pre></td></tr></table></figure>
<ul>
<li>楼梯有200级，每次走1级或是2级，从底走到顶一共有多少种走法？用代码（递归）实现<br>分析:<br>若是有2级台阶有几种走法?<br>1 一次走两步;2 走一步再走一步.<br>有3级台阶时<br>1 1 1;1 2;2 1;<br>4级台阶时<br>1 1 1 1 ;1 1 2; 1 2 1;<br>2 1 1; 2 2;<br>以此类推<br>fn(3)=fn(2) + fn(1);<br>fn(4)=fn(3) + fn(2);<br>……<br>fn(n)=fn(n-1) +fn(n-2);</li>
</ul>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span> (n===<span class="number">1</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (n===<span class="number">2</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">2</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> fn(n<span class="number">-1</span>) + fn(n<span class="number">-2</span>);</div><div class="line">&#125;</div><div class="line">fn(<span class="number">2</span>)<span class="comment">//2</span></div><div class="line">fn(<span class="number">3</span>)<span class="comment">//3</span></div><div class="line">fn(<span class="number">4</span>)<span class="comment">//5</span></div><div class="line">fn(<span class="number">5</span>)<span class="comment">//8</span></div><div class="line">fn(<span class="number">35</span>)<span class="comment">//14930352</span></div></pre></td></tr></table></figure>
<p> 递归的优点是是通过简单的代码写出强大的功能,缺点也显而易见,执行效率低</p>
<ul>
<li><p>写一个json对象深拷贝的方法，json对象可以多层嵌套，值可以是字符串、数字、布尔、json对象中的任意项</p>
</li>
<li><p>写一个数组深拷贝的方法，数组里的值可以是字符串、数字、布尔、数组中的任意项目</p>
</li>
<li><p>写一个深拷贝的方法，拷贝对象以及内部嵌套的值可以是字符串、数字、布尔、数组、json对象中的任意项</p>
</li>
</ul>
<p>思路:</p>
<p>1.写一个判断是否为<strong>JSON</strong>类型的函数 <code>isJson()</code><br>2.写一个判断是否为<strong>Array</strong>类型的函数 <code>isArray()</code><br>3.写一个判断是否为<strong>简单类型</strong>类型的函数 <code>isSimpleType()</code><br>4.执行拷贝之前先用上述三个函数进行类型判断<br>5.对于位置处于<strong>深层</strong>的引用类型用<code>递归</code>方式进行深拷贝<br>6.分别设置针对<code>JSON</code> <code>Array</code>的深拷贝函数 <code>deepCopyJson()</code>和<code>deepCopyArray</code><br>7.讲上述所有函数集成到<code>deepCopy(obj)</code>中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">     <span class="comment">//判断是否为JSON类型</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">isJson</span>(<span class="params">el</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">typeof</span> el == <span class="string">"object"</span> &amp;&amp; <span class="built_in">Object</span>.prototype.toString.call(el).toLowerCase() == <span class="string">"[object object]"</span> &amp;&amp; !el.length;</div><div class="line">      &#125;</div><div class="line">      <span class="comment">//判断是否为数组</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">el</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(!<span class="built_in">Array</span>.isArray)&#123;</div><div class="line">           <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(el).toLowerCase() === <span class="string">'[object array]'</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">           <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(el)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      <span class="comment">//判断是否为简单类型</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">isSimpleType</span>(<span class="params">el</span>)</span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="keyword">this</span>.isNumber(el) || <span class="keyword">this</span>.isString(el) || <span class="keyword">this</span>.isBoolean(el);</div><div class="line">      &#125;</div><div class="line"><span class="comment">//在深拷贝之前需要先对传入的参数类型进行判断</span></div><div class="line"></div><div class="line"></div><div class="line">      <span class="comment">//json类型的深拷贝</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">deepCopyJson</span>(<span class="params">json</span>)</span>&#123;</div><div class="line">          <span class="keyword">if</span> (!isJson(json)) &#123;<span class="keyword">return</span> &#123;&#125;&#125;<span class="comment">//如果不会 JSON 则停止执行</span></div><div class="line">          <span class="keyword">var</span> newJson = &#123;&#125;;</div><div class="line">          <span class="keyword">for</span>(key <span class="keyword">in</span> json)&#123;</div><div class="line">              <span class="keyword">if</span>(isJson(json[key]))&#123;<span class="comment">//通过判断引用类型内的子对象是什么类型,来判断使用什么方法继续拷贝</span></div><div class="line">                  newJson[key] = deepCopyJson(json[key])</div><div class="line">              &#125;<span class="comment">//对于位于深层的引用类型使用递归的方式 进行拷贝</span></div><div class="line">              <span class="keyword">else</span> <span class="keyword">if</span> (isArray(json[key])) &#123;</div><div class="line">                  newJson[key] = deepCopyArray(json[key])</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">else</span>&#123;</div><div class="line">                newJson[key] = json[key];<span class="comment">//把原 JSON 内的内容拷贝进新 JSON 对象</span></div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">return</span> newJson;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="comment">//Array的深拷贝</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">deepCopyArray</span>(<span class="params">array</span>)</span>&#123;</div><div class="line">          <span class="keyword">if</span> (!isArray(array)) &#123;<span class="keyword">return</span> []&#125;</div><div class="line">          <span class="keyword">var</span> newArray = [];</div><div class="line">          <span class="keyword">for</span>(key <span class="keyword">in</span> array)&#123;</div><div class="line">              <span class="keyword">if</span>(isJson(array[key]))&#123;</div><div class="line">                  newArray[key] = deepCopyJson(array[key])</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">else</span> <span class="keyword">if</span> (isArray(array[key])) &#123;</div><div class="line">                  newArray[key] = deepCopyArray(array[key])</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">else</span>&#123;</div><div class="line">                newArray[key] = array[key];</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">return</span> newArray;</div><div class="line">      &#125;</div><div class="line">      <span class="comment">//把之前的几个函数集成后 实现对象的深拷贝</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">          <span class="keyword">var</span> newObj;</div><div class="line">          <span class="keyword">if</span> (isArray(obj)) &#123;</div><div class="line">              newObj = deepCopyArray(obj);<span class="comment">//调用之前写好的方法拷贝数组</span></div><div class="line">          &#125;<span class="keyword">else</span> <span class="keyword">if</span> (isJson(obj)) &#123;</div><div class="line">              newObj = deepCopyJson(obj);<span class="comment">//调用之前的写好方法拷贝 JSON</span></div><div class="line">          &#125;;</div><div class="line">          <span class="keyword">return</span> newObj;<span class="comment">//返回拷贝完的对象</span></div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">var</span> json1 = &#123;</div><div class="line">        <span class="string">'a'</span>:<span class="number">2333</span>,</div><div class="line">        <span class="string">'b'</span>:<span class="literal">false</span>,</div><div class="line">        <span class="string">'c'</span>:<span class="string">'this is a string'</span>,</div><div class="line">        <span class="string">'d'</span>:&#123;</div><div class="line">          <span class="string">'a'</span>:<span class="number">2333</span>,</div><div class="line">          <span class="string">'b'</span>:<span class="literal">false</span>,</div><div class="line">          <span class="string">'c'</span>:<span class="string">'this is a string'</span>,</div><div class="line">          <span class="string">'d'</span>:&#123;</div><div class="line">            <span class="string">'a'</span>:<span class="string">'this is a deepString'</span>,</div><div class="line">            <span class="string">'b'</span>:[<span class="number">0</span>,<span class="number">1</span>,<span class="number">222</span>,<span class="number">333</span>,<span class="number">444</span>,<span class="number">555</span>]</div><div class="line">          &#125;</div><div class="line">        &#125;,</div><div class="line">          <span class="string">'e'</span>:[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,[<span class="number">40</span>,<span class="number">41</span>,<span class="number">42</span>,<span class="number">43</span>,[<span class="number">440</span>,<span class="number">441</span>,<span class="number">442</span>]]]</div><div class="line">      &#125;</div><div class="line"><span class="keyword">var</span> json2 =json1</div><div class="line"><span class="keyword">var</span> json3 = deepCopyJson(json1)</div><div class="line"><span class="built_in">console</span>.log(json1.d.d.a); <span class="comment">//this is a deepString</span></div><div class="line">                          <span class="comment">//原对象</span></div><div class="line"><span class="built_in">console</span>.log(json2.d.d.a); <span class="comment">//this is a deepString</span></div><div class="line">                          <span class="comment">//引用对象</span></div><div class="line"><span class="built_in">console</span>.log(json3.d.d.a); <span class="comment">//深拷贝后的对象</span></div><div class="line">json1.d.d.a=<span class="string">'this is a new strrrrrrrrrrrrrr'</span></div><div class="line"><span class="built_in">console</span>.log(json1.d.d.a);<span class="comment">//this is a new strrrrrrrrrrrrrr</span></div><div class="line">                         <span class="comment">//原对象</span></div><div class="line"><span class="built_in">console</span>.log(json2.d.d.a);<span class="comment">//this is a new strrrrrrrrrrrrrr</span></div><div class="line">                         <span class="comment">//引用对象随着json1改变而改变</span></div><div class="line"><span class="built_in">console</span>.log(json3.d.d.a); <span class="comment">//this is a deepString</span></div><div class="line">                          <span class="comment">// 与json1 json2 毫无关联 不受影响</span></div></pre></td></tr></table></figure>
<p>另外在stackoverflow上搜到的一个答案</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (obj === <span class="literal">null</span> || <span class="keyword">typeof</span>(obj) !== <span class="string">'object'</span> || <span class="string">'isActiveClone'</span> <span class="keyword">in</span> obj)<span class="comment">//判断是否是null 或者是否不是一个对象</span></div><div class="line">                                                                            <span class="comment">//isActiveClone 是什么没看懂?</span></div><div class="line">        <span class="keyword">return</span> obj;</div><div class="line"></div><div class="line">      <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="comment">//判断是否是一个Date对象</span></div><div class="line">        <span class="keyword">var</span> temp = <span class="keyword">new</span> obj.constructor(); <span class="comment">//or new Date(obj);</span></div><div class="line">      <span class="keyword">else</span></div><div class="line">        <span class="keyword">var</span> temp = obj.constructor();</div><div class="line"></div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;<span class="comment">//遍历obj</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, key)) &#123;<span class="comment">//hasOwnProperty  判断一个对象是否你给出的名称的属性或对象。</span></div><div class="line">          obj[<span class="string">'isActiveClone'</span>] = <span class="literal">null</span>;</div><div class="line">          temp[key] = clone(obj[key]);<span class="comment">//拷贝</span></div><div class="line">          <span class="keyword">delete</span> obj[<span class="string">'isActiveClone'</span>];<span class="comment">//到底isActiveClone是个啥?</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> temp;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> json1 = &#123;</div><div class="line">        <span class="string">'a'</span>:<span class="number">2333</span>,</div><div class="line">        <span class="string">'b'</span>:<span class="literal">false</span>,</div><div class="line">        <span class="string">'c'</span>:<span class="string">'this is a string'</span>,</div><div class="line">        <span class="string">'d'</span>:&#123;</div><div class="line">          <span class="string">'a'</span>:<span class="number">2333</span>,</div><div class="line">          <span class="string">'b'</span>:<span class="literal">false</span>,</div><div class="line">          <span class="string">'c'</span>:<span class="string">'this is a string'</span>,</div><div class="line">          <span class="string">'d'</span>:&#123;</div><div class="line">            <span class="string">'a'</span>:<span class="string">'this is a deepString'</span>,</div><div class="line">            <span class="string">'b'</span>:[<span class="number">0</span>,<span class="number">1</span>,<span class="number">222</span>,<span class="number">333</span>,<span class="number">444</span>,<span class="number">555</span>]</div><div class="line">          &#125;</div><div class="line">        &#125;,</div><div class="line">          <span class="string">'e'</span>:[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,[<span class="number">40</span>,<span class="number">41</span>,<span class="number">42</span>,<span class="number">43</span>,[<span class="number">440</span>,<span class="number">441</span>,<span class="number">442</span>]]]</div><div class="line">      &#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> json2 =json1</div><div class="line"><span class="keyword">var</span> json3 = deepCopyJson(json1)</div><div class="line"></div><div class="line"><span class="comment">//显示结果与第一种方法 相同</span></div><div class="line"><span class="built_in">console</span>.log(json1.d.d.a); <span class="comment">//this is a deepString</span></div><div class="line">                          <span class="comment">//原对象</span></div><div class="line"><span class="built_in">console</span>.log(json2.d.d.a); <span class="comment">//this is a deepString</span></div><div class="line">                          <span class="comment">//引用对象</span></div><div class="line"><span class="built_in">console</span>.log(json3.d.d.a); <span class="comment">//深拷贝后的对象</span></div><div class="line">json1.d.d.a=<span class="string">'this is a new strrrrrrrrrrrrrr'</span></div><div class="line"><span class="built_in">console</span>.log(json1.d.d.a);<span class="comment">//this is a new strrrrrrrrrrrrrr</span></div><div class="line">                         <span class="comment">//原对象</span></div><div class="line"><span class="built_in">console</span>.log(json2.d.d.a);<span class="comment">//this is a new strrrrrrrrrrrrrr</span></div><div class="line">                         <span class="comment">//引用对象随着json1改变而改变</span></div><div class="line"><span class="built_in">console</span>.log(json3.d.d.a); <span class="comment">//this is a deepString</span></div><div class="line">                          <span class="comment">// 与json1 json2 毫无关联 不受影响</span></div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://panda-hjn.github.io/2016/07/14/task19/" data-id="citd8g392000df4el6gaz1jur" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Date/">Date</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码题/">代码题</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/引用类型/">引用类型</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/深拷贝/">深拷贝</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/07/14/task19 - 副本/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          task19
        
      </div>
    </a>
  
  
    <a href="/2016/07/10/array/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数组</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Date/">Date</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript-代码题/">javascript  代码题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码题/">代码题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/引用类型/">引用类型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则表达式/">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深拷贝/">深拷贝</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Date/" style="font-size: 16.67px;">Date</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/javascript-代码题/" style="font-size: 10px;">javascript  代码题</a> <a href="/tags/代码题/" style="font-size: 13.33px;">代码题</a> <a href="/tags/引用类型/" style="font-size: 13.33px;">引用类型</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/深拷贝/" style="font-size: 13.33px;">深拷贝</a> <a href="/tags/笔记/" style="font-size: 10px;">笔记</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/09/22/Ajax/">Ajax</a>
          </li>
        
          <li>
            <a href="/2016/07/27/正则表达式/">正则表达式</a>
          </li>
        
          <li>
            <a href="/2016/07/14/task19 - 副本/">task19</a>
          </li>
        
          <li>
            <a href="/2016/07/14/task19/">task19</a>
          </li>
        
          <li>
            <a href="/2016/07/10/array/">数组</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 韩佳宁<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>